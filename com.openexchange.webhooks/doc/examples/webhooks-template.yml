# Example definitions of available Webhooks that can be subscribed by clients.
# 
# This template contains examples and will be overwritten during updates. To use, copy this file to 
# /opt/open-xchange/etc/webhooks.yml and configure as needed.
#
# Each configured Webhook can be enabled for users using the corresponding identifier used in this .yml file. For this purpose,
# the config-cascade-enabled setting "com.openexchange.webhooks.enabledIds" is available.
#
# See also https://documentation.open-xchange.com/latest/middleware/push_notifications/webhooks.html
# for further details and a complete list of available configuration options.
#
#
# Notation/meaning is:
# <unique-identifier>:
#     uri: <URI>
#       String. The URI end-point of the Webhook. May be overridden during subscribe depending on "uriValidationMode".
#
#     uriValidationMode: <uri-validation-mode>
#       String. Specifies how the possible client-specified URI for a Webhook end-point is supposed to be validated against the URI
#               from configured Webhook end-point. Possible values: `none`, `prefix`, and `exact`. For `none` no requirements given.
#               Any client-specified URI is accepted. For `prefix` he client-specified and configured URI for a Webhook end-point are
#               required to start with same prefix. For `exact` the client-specified and configured URI for a Webhook end-point are
#               required to be exactly the same. `prefix` is default.
#
#     webhookSecret: <webhook-secret>
#       String. The value for the "Authorization" HTTP header to pass on calling Webhook's URI. May be overridden during subscribe.
#
#     login: <login>
#       String. The login part for HTTP Basic Authentication if no value for the "Authorization" HTTP header is specified. May be 
#               overridden during subscribe.
#
#     password: <password>
#       String. The password part for HTTP Basic Authentication if no value for the "Authorization" HTTP header is specified. May be 
#               overridden during subscribe.
#
#     signatureSecret: <signature-secret>
#       String. Specifies shared secret known by caller and Webhook host. Used for signing.
#
#     version: <version>
#       Integer. Specifies the version of the Webhook. Used for signing.
#
#     signatureHeaderName: <signature-header-name>
#       String. Specifies the name of the signature header that carries the signature.
#
#     maxTimeToLiveMillis: <max-time-to-live>
#       Number. The max. time to live in milliseconds for the Webhook before considered as expired. If absent Webhook "lives" forever.
#
#     maxNumberOfSubscriptionsPerUser: <max-number-per-user>
#       Number. The max. number of subscriptions for this Webhook allowed for a single user. Equal or less than 0 (zero) means infinite.
#
#     allowSharedUri: <allow-shared-uri>
#       Boolean. Whether the same URI can be used by multiple different users or not. Optional, defaults to `true`.
#

# An example using "Authorization" HTTP header
mywebhook:
    uri: https://my.endpoint.com:8080/webhook/event
    webhookSecret: supersecret
    signatureSecret: da39a3ee5e6b4b
    version: 1
    signatureHeaderName: X-OX-Signature
    maxTimeToLiveMillis: 2678400000
    maxNumberOfSubscriptionsPerUser: 2
    uriValidationMode: prefix


# An example using HTTP Basic Authentication
mywebhook2:
    uri: https://another.endpoint.com:8080/webhook/event
    login: admin
    password: topsecret
    signatureSecret: fe39a3e12e6b8a
    version: 1
    signatureHeaderName: X-Custom-Signature
